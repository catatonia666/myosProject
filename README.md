Project of a site for creating stories and dialogues with multiple choises.

Проект сайта для создания собственных историй и диалогов со множественными выборами.

Проект представляет собой сайт, на котором пользователи могут создавать и делиться историями со множественными выборами. Проект вдохновлен настольными и компьютерными ролевыми играми, в которых диалоги между игроком и персонажем реализованы в схожей манере, а так же серией книг Write Your Own Story. Далее обозначен список из основных URL, расположенных в соответствии с ожидаемым паттерном поведения пользователя при попадании на сайт, с дополнительными комментариями для разработчиков. Полный список путей расположен в файле server.go

/home

Стартовая страница, на которой выводится список из 10 последних историй, видимых пользователю. Запустив миграции командой make migrate в базу данных загружается подготовленная заранее ознакомительная история.

/about

Краткая инструкция по использованию сайта, в особенности по созданию и редактированию историй.

/user/signup

Страница, на которой пользователь может пройти регистрацию. По завершении регистрации будет перенаправлен на страницу входа в аккаунт.

/user/login

Страница, на которой пользователь может зайти в заранее созданный аккаунт. После входа в аккаунт на навигационной панели сайта появляются кнопки: New Story - окно создания новой истории, Account - базовая информация об аккаунте и возможность сменить пароль, Logout - кнопка выхода из аккаунта.

/stories/startingblocks/new

Окно создания новой истории (стартового блока истории), доступно только зарегистрированным пользователям. В верхнем окне для ввода необходимо ввести название истории (может повторяться, не является уникальным идентификатором). В нижнем левом окне вводится текст стартового блока истории (не может остаться пустым). В нижнем правом окне вводятся варианты (опции) дальнейшего развития истории. В окне создания опций стартового блока опции автоматически отделяются друг от друга нажатием клавиши Enter, т.е. при переходе на новую строку. Пример:

Option one. Second option that won't be save.
Second option.
And the very third option.

Таким образом будет создано три опции, ссылки на которые будет иметь стартовый блок истории. Опции представляют из себя созданные, но до редактирования пустые блоки истории. Паттерн создания стартового блока несколько отличается от паттерна создания последующих блоков истории. Под окнами ввода расположен чекбокс, позволяющий сделать историю приватной.

/stories/startingblocks/id

Окно отображения стартового блока истории. Уникальным идентификатором каждой истории является её ID. В верхнем поле отображается название истории. В нижнем левом поле отображается текст соответствующего стартового блока. В нижнем правом поле отображается кликабельный текст в соответствии с созданными опциями, каждая строка ведет к соответствующей опции. В конце помимо созданных опций автоматически добавляется опция To the start of conversation., позволяющая читателю сразу вернуться к стартовому блоку истории с любого из последующих.
В случае, если пользователь является автором истории под стартовым блоком появляются кнопки Update и Delete, позволяющие отредактировать и удалить стартовый блок соответственно, а также список из всех ID блоков (включая стартовый), которые относятся к этой истории. При нажатии на любой из блоков пользователь перейдет к просмотру выбранного блока.

/stories/startingblocks/id/edit

При нажатии на кнопку Update пользователь попадает в окно редактирования стартового блока истории. В полях заранее вписаны имеющиеся данные. Верхнее поле (название истории) и нижнее левое поле (текст стартового блока) можно редактировать в свободном формате, специальный паттерн не предусмотрен. Редактирование правого нижнего блока (блок с опциями) происходит в соответствии с ожидаемыми действиями. 
Каждая опция по прежнему расположена на отдельной строке. В процессе редактирования перед текстом каждой опции должна быть указана команда, в соответствии с которой произойдет последующее редактирование опции. После названия команды идет пробел, далее идет (если необходимо) ID блока, далее идет текст опции (если необходимо). Таким образом получается следующее:
commandName ID Some text for a new option.
Пользователям доступны следующие команды:

add - добавляет новую опцию в редактируемый блок. Не требует указания ID. Ожидаемый формат: add Completly new option for the block. В итоге создается новая опция и новый пустой блок истории.

change - изменяет текст опции, которая ведет к уже созданному блоку ID, который относится к стартовому блоку. Требует указания ID. Ожидаемый формат: change 1 This option was changed completly. В итоге меняется только текст уже существующей опции.

addTo - добавляет новую опцию, которая ведет к уже созданному блоку ID. Требует указания ID. Например, пользователь хочет чтобы разные выборы вели к одному блоку. Этого можно достичь с помощью команды addTo. Ожидаемый формат: addTo 1 This option leads to the block with first ID too!

delete - удаляет опцию и блок ID, к которому она ведет. Требует указания ID, не требует нового текста. Если у удаленного блока уже были свои опции, которые после удаления останутся ни с чем не связанными, они также будут удалены. Ожидаемый формат: delete 2

Схематическое изображение процесса редактуры опций и итогового результата. Текст - это то, что указано в опциях, но не контент самой опции, т.е. итогового блока, к которому может вести множество опций (то есть возможно отношение many-to-one)
![magik](https://github.com/user-attachments/assets/948f7b39-1223-42ca-b0b9-15d91149b9e8)

/stories/blocks/id

Окно отображения блока истории. Уникальным идентификатором каждого блока является его ID. Окно идентично окну отображения стартового блока, за исключением отсутствия поля с названием.

/stories/blocks/id/edit

Окно редактирования блока истории. Способ редактирования идентичен редактированию стартового блока истории.
